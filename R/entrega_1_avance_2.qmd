---
title: "Entrega 1 - Avance 2"
format: html
editor: visual
---

## Declaramos las librerías necesarias

```{r, message=FALSE}
library(readr)
library(dplyr)
```

## Leemos las bases de datos

```{r, message=FALSE}
REC91 <- read_csv("../data/raw_data/REC91.csv")
REC0111 <- read_csv("../data/raw_data/REC0111.csv")
RECH5 <- read_csv("../data/raw_data/RECH5.csv")
REC44 <- read_csv("../data/raw_data/REC44.csv")
RECH23 <- read_csv("../data/raw_data/RECH23.csv")
RECH0 <- read_csv("../data/raw_data/RECH0.csv")
```

## Resumen de los datos

### Tabla RECH0 - Características del hogar

```{r}
summary(RECH0)
```

```{r}
RECH0 <- select(RECH0, HHID, HV009, HV015)

RECH0 <- rename(RECH0, 
                cuestionario_hogar_id=HHID,
                personas_en_el_hogar=HV009,
                estado_entrevista=HV015)
```

```{r}
names(RECH0)
```

### Tabla REC0111 - Datos básicos del MEF

Relación entre identificación del cuestionario individual e identificación del cuestionario del hogar.

```{r}
summary(REC0111)
```

```{r}
REC0111 <- select(REC0111, CASEID, HHID, V024, V102)

REC0111 <- rename(REC0111,
                  cuestionario_individual_id=CASEID,
                  cuestionario_hogar_id=HHID,
                  region=V024,
                  tipo_de_residencia=V102)
```

```{r}
names(REC0111)
```

```{r}
table(REC0111$region)
```

### Tabla RECH5 - Peso y talla (anemia)

Características de las mujeres de 12 a 49 años (madres de los infantes descritos en la tabla REC44).

```{r}
summary(RECH5)
```

```{r}
RECH5 <- select(RECH5, HHID, HA1, HA2, HA3, HA13, HA53, HA54, HA55, HA56, HA57, HA67)

RECH5 <- rename(RECH5,
                cuestionario_individual_id=HHID,
                edad=HA1,
                peso=HA2,
                talla=HA3,
                estado_medicion=HA13,
                hemoglobina=HA53,
                is_embarazada=HA54,
                estado_medicion_hemoglobina=HA55,
                homoglobina_ajustada_latitud=HA56,
                anemia=HA57,
                nivel_educativo=HA67)
```

```{r}
names(RECH5)
```

### Tabla REC44 - Peso y talla (anemia)

Características de los infantes de 0 a 59 meses (5 años aproximadamente) por mamá.

```{r}
summary(REC44)
```

```{r}
REC44 <- select(REC44, CASEID, HW1, HW2, HW3, HW13, HW53, HW55, HW56, HW57)

REC44 <- rename(REC44,
                cuestionario_individual_id=CASEID,
                edad=HW1,
                peso=HW2,
                talla=HW3,
                estado_medicion=HW13,
                hemoglobina=HW53,
                estado_medicion_hemoglobina=HW55,
                hemoglobina_ajustada_latitud=HW56,
                anemia=HW57)
```

```{r}
names(REC44)
```

Voy a cambiarle las respuestas a anemia, de 1 a 4 a grave o sin anemia.

```{r}
REC44$anemia[REC44$anemia %in% c(1)] <-"Grave"
REC44$anemia[REC44$anemia %in% c(2)] <-"Moderado"
REC44$anemia[REC44$anemia %in% c(3)] <-"Leve"
REC44$anemia[REC44$anemia %in% c(4)] <-"Sin_Anemia"
```

```{r}
incompletos <- filter(RECH0, estado_entrevista!=1)
#Incompletos son los hogares donde no se pudo hacer obtencion de variables por diversas razones
incompletos
inner_join(incompletos, REC0111, "cuestionario_hogar_id")
#Empatamos la primera tabla con los hogares donde se obtuvieron datos
```

### Limpieza de datos

Vamos a descartar las observaciones que no otorgen respuesta a nuestra informacion.

Comenzemos con RECH5.

```{r}
#filter(RECH5, estado_medicion!=0)
#Las observaciones donde estado_medicion_hemoglobina es distinto de cero no realizaron su medicion de hemoglobina
RECH5 <- filter(RECH5, estado_medicion_hemoglobina==0)
#Ahora RECH5 tiene a los valores que si responden. 
```

Miren otros valores para limpiar.

SIgamos con REC44

```{r}
REC44 <- filter(REC44, estado_medicion_hemoglobina==0)
```
